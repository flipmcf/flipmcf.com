<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication Form</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f4f9;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        form {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }
        fieldset {
            border: none;
            padding: 0;
            margin: 0;
        }
        legend {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: #333;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #555;
        }
        input[type="text"],
        input[type="password"] {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box; /* Important for padding and width */
        }
        .checkbox-group {
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
        }
        input[type="checkbox"] {
            margin-right: 10px;
            width: auto;
        }
        .radio-group {
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .radio-item {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
        }
        input[type="radio"] {
            margin-right: 10px;
            width: auto;
        }
        #signature-pad {
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: crosshair;
            width: 100%;
        }
        .signature-container p {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0;
        }
        .clear-button {
            margin-top: 10px;
        }
        button {
            width: 100%;
            padding: 0.75rem;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

    <form action="/api/authenticate" method="post">
        <fieldset>
            <legend>K2C Snake Consultants, Inc Authorization form</legend>
            <span class="red">* Indicates required question</span>
            <div class="form-group">
                <label for="email">Email *</label>
                <input type="text" id="username" name="username" placeholder="Enter your username" required>
            </div>
            
            <div class="form-group">
                <label for="password">Your Legal Name *</label>
                <input type="password" id="password" name="password" placeholder="Enter your password" required>
            </div>

            <div class="form-group">
                <label for="address">Your Address *</label>
                <input type="text" id="address" name="address" placeholder="Enter your address" required>
            </div>

            <div class="form-group">
                <label for="phone">Your Phone *</label>
                <input type="text" id="phone" name="phone" placeholder="Enter your phone" required>
            </div>

            <p>Please review these requirements and check to indicate that you understand and agree:</p>            
            
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <input type="checkbox" id="req1" name="req1" value="agree_handling" required>
                    <label for="req1">I agree to all snake handling procedures.</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="req2" name="req2" value="agree_feeding" required>
                    <label for="req2">I will follow the approved feeding schedule.</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="req3" name="req3" value="agree_bite_protocol" required>
                    <label for="req3">I have memorized the emergency bite protocol.</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="req4" name="req4" value="agree_no_touching" required>
                    <label for="req4">I will not tap on the glass.</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="req5" name="req5" value="agree_no_hats" required>
                    <label for="req5">I will not wear a tiny hat on any snake.</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="req6" name="req6" value="agree_python_jokes" required>
                    <label for="req6">I will make no more than three (3) Python programming jokes per day.</label>
                </div>
            </div>


            <div class="checkbox-group">
                <p>The wildlife in question is (Check all that you think are applicable):</p>
                <div class="checkbox-item">
                    <input type="checkbox" id="wildlife_visible" name="wildlife_visible" value="true">
                    <label for="wildlife_visible">Visible</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="wildlife_accessible" name="wildlife_accessible" value="true">
                    <label for="wildlife_accessible">Accessible to the team member</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="wildlife_vet_care" name="wildlife_vet_care" value="true">
                    <label for="wildlife_vet_care">In need of veterinary care</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="wildlife_trap" name="wildlife_trap" value="true">
                    <label for="wildlife_trap">Going to need a trap set</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="wildlife_search" name="wildlife_search" value="true">
                    <label for="wildlife_search">Going to need to be searched for</label>
                </div>
            </div>

            <div class="form-group">
                <label for="address"> After looking at the fees at https://www.k2cwildlife.com/services-fees  , I believe the fee will be about $____ , but it may be different than that. Service provider will notify you of the amount prior to beginning in most cases, unless urgency requires immediate action upon arrival. At that time, if the fee is not agreed to, the animal will be released on site.*</label>
                <input type="text" id="dummy" name="dummy" placeholder="">
            </div>
           
            <div class="radio-group">
                <p>The team member coming is *</p>
                <div class="radio-item">
                    <input type="radio" id="team_bonnie" name="team_member" value="Bonnie" required>
                    <label for="team_bonnie">Bonnie - (lives in mid PW County)</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="team_mark" name="team_member" value="Mark">
                    <label for="team_mark">Mark - (lives in Clifton)</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="team_bill" name="team_member" value="Bill">
                    <label for="team_bill">Bill - (lives in Bristow)</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="team_joe" name="team_member" value="Joe">
                    <label for="team_joe">Joe - (lives in Gainesville)</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="team_amanda" name="team_member" value="Amanda">
                    <label for="team_amanda">Amanda - (lives in Alexandria)</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="team_robyn" name="team_member" value="Robyn">
                    <label for="team_robyn">Robyn - (lives in mid PW County)</label>
                </div>
            </div>

            <div class="form-group">
                <label for="address"> Type your name to acknowledge and agree: *</label>
                <input type="text" id="typed_signature" name="typed_signature" placeholder="" required>
            </div>
            
            <div class="form-group signature-container">
                <label for="signature-pad">Your Signature *</label>
                <p>Add your signature here with a finger, stylus, mouse, etc. We understand that it won't be a typical signature.</p>
                <canvas id="signature-pad" width="400" height="150"></canvas>
                <button type="button" class="clear-button" onclick="clearSignature()">Clear Signature</button>
                <input type="hidden" id="signature_data" name="signature_data">
            </div>

            <button type="submit">Login</button>
        </fieldset>
    </form>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const canvas = document.getElementById('signature-pad');
            const form = canvas.closest('form');
            const signatureInput = document.getElementById('signature_data');
            const ctx = canvas.getContext('2d');
            let drawing = false;
            let lastX = 0;
            let lastY = 0;

            // Set canvas size based on its display size
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;

            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;

            function getMousePos(canvas, evt) {
                const rect = canvas.getBoundingClientRect();
                return {
                    x: evt.clientX - rect.left,
                    y: evt.clientY - rect.top
                };
            }

            function getTouchPos(canvas, touch) {
                const rect = canvas.getBoundingClientRect();
                return {
                    x: touch.clientX - rect.left,
                    y: touch.clientY - rect.top
                };
            }

            function startDrawing(e) {
                drawing = true;
                const pos = e.touches ? getTouchPos(canvas, e.touches[0]) : getMousePos(canvas, e);
                [lastX, lastY] = [pos.x, pos.y];
            }

            function draw(e) {
                if (!drawing) return;
                e.preventDefault(); // prevent scrolling while drawing
                const pos = e.touches ? getTouchPos(canvas, e.touches[0]) : getMousePos(canvas, e);
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(pos.x, pos.y);
                ctx.stroke();
                [lastX, lastY] = [pos.x, pos.y];
            }

            const stopDrawing = () => drawing = false;

            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);

            canvas.addEventListener('touchstart', startDrawing);
            canvas.addEventListener('touchmove', draw);
            canvas.addEventListener('touchend', stopDrawing);

            window.clearSignature = function() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                signatureInput.value = '';
            }

            // Before submitting the form, save the signature as a data URL
            form.addEventListener('submit', function(e) {
                // Check if the canvas is empty
                const isCanvasBlank = !ctx.getImageData(0, 0, canvas.width, canvas.height).data.some(channel => channel !== 0);
                if (isCanvasBlank) {
                    alert('Please provide a signature.');
                    e.preventDefault(); // Stop form submission
                } else {
                    signatureInput.value = canvas.toDataURL('image/png');
                }
            });
        });
    </script>

</body>
</html>